<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>관용 표현 스토리텔링 | 문법놀이터</title>
    <link rel="stylesheet" href="../assets/css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .activity-header {
            background: linear-gradient(135deg, #4CAF50 0%, #8BC34A 100%);
            padding: 30px 20px;
            text-align: center;
            color: white;
        }

        .activity-header h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }

        .activity-header p {
            font-size: 16px;
            max-width: 700px;
            margin: 0 auto;
        }

        .activity-container {
            max-width: 800px;
            margin: 30px auto;
            padding: 0 20px;
        }

        .activity-info {
            background-color: #E8F5E9;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .activity-info h2 {
            color: #2E7D32;
            font-size: 20px;
            margin-bottom: 10px;
        }

        .activity-info p {
            color: #555;
            line-height: 1.6;
        }

        .idiom-section {
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.1);
            padding: 25px;
            margin-bottom: 30px;
        }

        .section-title {
            font-size: 20px;
            color: #2E7D32;
            margin-bottom: 20px;
        }

        .idiom-cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .idiom-card {
            background-color: #f5f5f5;
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s;
            border-left: 4px solid #8BC34A;
        }

        .idiom-card:hover {
            background-color: #E8F5E9;
            transform: translateY(-3px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .idiom-card.selected {
            background-color: #E8F5E9;
            border-left: 4px solid #4CAF50;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .idiom-expression {
            font-weight: bold;
            color: #2E7D32;
            margin-bottom: 8px;
        }

        .idiom-meaning {
            font-size: 14px;
            color: #666;
        }

        .story-section {
            margin-top: 30px;
        }

        .input-group {
            margin-bottom: 15px;
        }

        .input-group label {
            display: block;
            font-weight: bold;
            margin-bottom: 5px;
            color: #444;
        }

        .input-group select, .input-group input, .input-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 16px;
        }

        .input-group textarea {
            min-height: 150px;
            resize: vertical;
        }

        .selected-idioms {
            margin-top: 20px;
            margin-bottom: 15px;
        }

        .selected-idioms-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #444;
        }

        .selected-idioms-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 15px;
        }

        .selected-idiom {
            background-color: #E8F5E9;
            border-radius: 20px;
            padding: 5px 15px;
            font-size: 14px;
            color: #2E7D32;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .remove-idiom {
            cursor: pointer;
            width: 18px;
            height: 18px;
            background-color: #2E7D32;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }

        .actions {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
        }

        .action-button {
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 30px;
            padding: 12px 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .action-button:hover {
            background-color: #388E3C;
        }

        .action-button.secondary {
            background-color: #f5f5f5;
            color: #333;
        }

        .action-button.secondary:hover {
            background-color: #e0e0e0;
        }

        .feedback-msg {
            margin-top: 20px;
            padding: 15px;
            border-radius: 6px;
            text-align: center;
            font-size: 16px;
            display: none;
        }

        .feedback-msg.success {
            background-color: #E8F5E9;
            color: #388E3C;
        }

        .feedback-msg.error {
            background-color: #FFEBEE;
            color: #D32F2F;
        }

        .stories-section {
            margin-top: 40px;
            display: none;
        }

        .story-card {
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.1);
            padding: 20px;
            margin-bottom: 20px;
        }

        .story-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }

        .story-title {
            font-size: 18px;
            font-weight: bold;
            color: #2E7D32;
        }

        .story-idioms {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }

        .story-idiom {
            background-color: #E8F5E9;
            border-radius: 12px;
            padding: 3px 8px;
            font-size: 12px;
            color: #2E7D32;
        }

        .story-content {
            font-size: 16px;
            color: #333;
            line-height: 1.6;
        }

        .examples-section {
            margin-top: 40px;
        }

        .example-story {
            background-color: #f9f9f9;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 4px solid #8BC34A;
        }

        .example-header {
            margin-bottom: 15px;
            font-size: 16px;
            font-weight: bold;
            color: #2E7D32;
        }

        .example-content {
            font-size: 15px;
            color: #444;
            line-height: 1.6;
        }

        .example-idioms {
            margin-top: 15px;
            font-size: 14px;
            color: #666;
            font-style: italic;
        }

        .idiom-highlight {
            font-weight: bold;
            color: #4CAF50;
            text-decoration: underline;
        }

        @media (max-width: 600px) {
            .idiom-cards {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    

    <div class="activity-header">
        <h1>관용 표현 스토리텔링</h1>
        <p>다양한 관용 표현을 활용하여 재미있는 이야기를 만들어 보세요!</p>
    </div>

    <div class="activity-container">
        <div class="activity-info">
            <h2>관용 표현이란?</h2>
            <p>관용 표현(관용어)은 둘 이상의 단어가 결합하여 원래의 의미와는 다른 특별한 의미를 나타내는 표현입니다. 오랜 시간 많은 사람들에 의해 자연스럽게 형성되었으며, 우리의 일상 대화나 문학 작품에서 자주 사용됩니다. 관용 표현을 적절히 사용하면 의미를 더 생생하고 풍부하게 전달할 수 있습니다.</p>
        </div>

        <div class="idiom-section">
            <h3 class="section-title">관용 표현 선택하기</h3>
            <p>아래 관용 표현들 중에서 이야기에 넣고 싶은 표현을 클릭하세요. (최대 3개까지 선택 가능)</p>

            <div class="idiom-cards">
                <div class="idiom-card" data-idiom="가슴이 철렁하다">
                    <div class="idiom-expression">가슴이 철렁하다</div>
                    <div class="idiom-meaning">갑자기 놀라거나 무서워서 가슴이 내려앉는 느낌이 들다.</div>
                </div>
                <div class="idiom-card" data-idiom="손에 땀을 쥐다">
                    <div class="idiom-expression">손에 땀을 쥐다</div>
                    <div class="idiom-meaning">긴장되거나 조마조마한 상황에서 매우 긴장하다.</div>
                </div>
                <div class="idiom-card" data-idiom="발이 넓다">
                    <div class="idiom-expression">발이 넓다</div>
                    <div class="idiom-meaning">아는 사람이 많거나 교류하는 범위가 넓다.</div>
                </div>
                <div class="idiom-card" data-idiom="꿈에도 생각하지 못하다">
                    <div class="idiom-expression">꿈에도 생각하지 못하다</div>
                    <div class="idiom-meaning">전혀 예상하지 못했던 일이 일어나다.</div>
                </div>
                <div class="idiom-card" data-idiom="눈코 뜰 새 없다">
                    <div class="idiom-expression">눈코 뜰 새 없다</div>
                    <div class="idiom-meaning">매우 바빠서 잠시도 쉴 틈이 없다.</div>
                </div>
                <div class="idiom-card" data-idiom="마음이 콩밭에 가 있다">
                    <div class="idiom-expression">마음이 콩밭에 가 있다</div>
                    <div class="idiom-meaning">정신이 산만하여 딴 생각을 하고 있다.</div>
                </div>
                <div class="idiom-card" data-idiom="등골이 서늘하다">
                    <div class="idiom-expression">등골이 서늘하다</div>
                    <div class="idiom-meaning">깜짝 놀라거나 두려움을 느낄 때 등줄기가 차갑게 느껴지다.</div>
                </div>
                <div class="idiom-card" data-idiom="입이 귀에 걸리다">
                    <div class="idiom-expression">입이 귀에 걸리다</div>
                    <div class="idiom-meaning">매우 기뻐서 환하게 웃는 모습을 표현함.</div>
                </div>
            </div>

            <div class="selected-idioms">
                <div class="selected-idioms-title">선택한 관용 표현:</div>
                <div class="selected-idioms-list" id="selectedIdiomsList">
                    <!-- 선택된 관용 표현들이 여기에 추가됩니다 -->
                </div>
            </div>
        </div>

        <div class="idiom-section story-section">
            <h3 class="section-title">이야기 작성하기</h3>
            <p>선택한 관용 표현을 모두 사용하여 짧은 이야기를 작성해보세요.</p>

            <div class="input-group">
                <label for="storyTitle">이야기 제목:</label>
                <input type="text" id="storyTitle" placeholder="이야기의 제목을 입력하세요.">
            </div>

            <div class="input-group">
                <label for="storyContent">이야기 내용:</label>
                <textarea id="storyContent" placeholder="선택한 관용 표현을 모두 포함한 이야기를 작성해보세요."></textarea>
            </div>

            <div class="actions">
                <button class="action-button" id="saveButton">
                    <i class="fas fa-save"></i> 이야기 저장하기
                </button>
                <button class="action-button secondary" id="resetButton">
                    <i class="fas fa-redo-alt"></i> 다시 작성하기
                </button>
            </div>

            <div class="feedback-msg success" id="feedbackSuccess">
                이야기가 성공적으로 저장되었습니다!
            </div>
            <div class="feedback-msg error" id="feedbackError">
                오류: 선택한 관용 표현을 모두 사용해야 합니다.
            </div>
        </div>

        <div class="stories-section" id="storiesSection">
            <h3 class="section-title">내가 작성한 이야기</h3>
            <div id="myStoriesList">
                <!-- 작성한 이야기들이 여기에 추가됩니다 -->
            </div>
        </div>

        <div class="idiom-section examples-section">
            <h3 class="section-title">관용 표현 이야기 예시</h3>

            <div class="example-story">
                <div class="example-header">첫 발표의 긴장감</div>
                <div class="example-content">
                    민지는 학교에서 처음으로 큰 발표를 앞두고 있었다. 발표 시간이 다가올수록 <span class="idiom-highlight">손에 땀을 쥐며</span> 발표 자료를 확인했다. 그때 갑자기 컴퓨터 화면이 꺼졌고, 민지는 <span class="idiom-highlight">가슴이 철렁했다</span>. 다행히 선생님이 도와주셨고, 민지는 무사히 발표를 마칠 수 있었다. 발표가 끝나고 친구들이 박수를 쳐주자 민지는 <span class="idiom-highlight">입이 귀에 걸린</span> 채로 자리로 돌아왔다.
                </div>
                <div class="example-idioms">
                    사용된 관용 표현: 손에 땀을 쥐다, 가슴이 철렁하다, 입이 귀에 걸리다
                </div>
            </div>

            <div class="example-story">
                <div class="example-header">바쁜 시험 기간</div>
                <div class="example-content">
                    시험 기간이 되자 지훈이는 <span class="idiom-highlight">눈코 뜰 새 없이</span> 공부를 했다. 하지만 친구가 놀러 가자고 연락이 오자 <span class="idiom-highlight">마음이 콩밭에 가 있어</span> 공부에 집중할 수 없었다. 결국 시험 전날에야 정신을 차리고 밤새 공부했지만, 시험 문제를 보니 <span class="idiom-highlight">등골이 서늘한</span> 기분이 들었다.
                </div>
                <div class="example-idioms">
                    사용된 관용 표현: 눈코 뜰 새 없다, 마음이 콩밭에 가 있다, 등골이 서늘하다
                </div>
            </div>
        </div>
    </div>

    

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 요소 가져오기
            const idiomCards = document.querySelectorAll('.idiom-card');
            const selectedIdiomsList = document.getElementById('selectedIdiomsList');
            const storyTitleInput = document.getElementById('storyTitle');
            const storyContentInput = document.getElementById('storyContent');
            const saveButton = document.getElementById('saveButton');
            const resetButton = document.getElementById('resetButton');
            const feedbackSuccess = document.getElementById('feedbackSuccess');
            const feedbackError = document.getElementById('feedbackError');
            const storiesSection = document.getElementById('storiesSection');
            const myStoriesList = document.getElementById('myStoriesList');
            
            // 선택된 관용 표현 배열
            let selectedIdioms = [];
            
            // 관용 표현 선택 이벤트
            idiomCards.forEach(card => {
                card.addEventListener('click', function() {
                    const idiom = this.dataset.idiom;
                    
                    // 이미 선택되어 있으면 선택 해제
                    if (this.classList.contains('selected')) {
                        this.classList.remove('selected');
                        removeSelectedIdiom(idiom);
                        return;
                    }
                    
                    // 최대 3개까지만 선택 가능
                    if (selectedIdioms.length >= 3) {
                        alert('관용 표현은 최대 3개까지 선택할 수 있습니다.');
                        return;
                    }
                    
                    // 선택 추가
                    this.classList.add('selected');
                    selectedIdioms.push(idiom);
                    
                    // 선택 목록에 추가
                    const idiomElement = document.createElement('div');
                    idiomElement.className = 'selected-idiom';
                    idiomElement.innerHTML = `
                        ${idiom}
                        <span class="remove-idiom" data-idiom="${idiom}">×</span>
                    `;
                    selectedIdiomsList.appendChild(idiomElement);
                    
                    // 삭제 이벤트 추가
                    const removeButton = idiomElement.querySelector('.remove-idiom');
                    removeButton.addEventListener('click', function(e) {
                        e.stopPropagation();
                        const idiomToRemove = this.dataset.idiom;
                        removeSelectedIdiom(idiomToRemove);
                        
                        // 카드 선택 해제
                        idiomCards.forEach(card => {
                            if (card.dataset.idiom === idiomToRemove) {
                                card.classList.remove('selected');
                            }
                        });
                    });
                });
            });
            
            // 선택된 관용 표현 제거 함수
            function removeSelectedIdiom(idiom) {
                // 배열에서 제거
                selectedIdioms = selectedIdioms.filter(item => item !== idiom);
                
                // DOM에서 제거
                const idiomElements = selectedIdiomsList.querySelectorAll('.selected-idiom');
                idiomElements.forEach(element => {
                    const removeButton = element.querySelector('.remove-idiom');
                    if (removeButton && removeButton.dataset.idiom === idiom) {
                        element.remove();
                    }
                });
            }
            
            // 이야기 저장 이벤트
            saveButton.addEventListener('click', function() {
                const title = storyTitleInput.value.trim();
                const content = storyContentInput.value.trim();
                
                // 유효성 검사
                if (!title) {
                    alert('이야기 제목을 입력해주세요.');
                    return;
                }
                
                if (!content) {
                    alert('이야기 내용을 입력해주세요.');
                    return;
                }
                
                if (selectedIdioms.length === 0) {
                    alert('최소 하나 이상의 관용 표현을 선택해주세요.');
                    return;
                }
                
                // 모든 관용 표현이 사용되었는지 확인
                let allIdiomsUsed = true;
                let missingIdioms = [];
                
                selectedIdioms.forEach(idiom => {
                    if (!content.includes(idiom)) {
                        allIdiomsUsed = false;
                        missingIdioms.push(idiom);
                    }
                });
                
                if (!allIdiomsUsed) {
                    feedbackError.textContent = `다음 관용 표현이 이야기에 사용되지 않았습니다: ${missingIdioms.join(', ')}`;
                    feedbackError.style.display = 'block';
                    feedbackSuccess.style.display = 'none';
                    return;
                }
                
                // 이야기 저장하고 표시
                createStoryCard(title, content, selectedIdioms);
                
                // 성공 피드백 표시
                feedbackSuccess.style.display = 'block';
                feedbackError.style.display = 'none';
                
                // 3초 후 피드백 숨기기
                setTimeout(() => {
                    feedbackSuccess.style.display = 'none';
                }, 3000);
            });
            
            // 이야기 카드 생성 함수
            function createStoryCard(title, content, idioms) {
                // 이야기 섹션 표시
                storiesSection.style.display = 'block';
                
                // 이야기 카드 생성
                const storyCard = document.createElement('div');
                storyCard.className = 'story-card';
                
                // 관용 표현에 하이라이트 적용
                let highlightedContent = content;
                idioms.forEach(idiom => {
                    highlightedContent = highlightedContent.replace(
                        new RegExp(idiom, 'g'),
                        `<span class="idiom-highlight">${idiom}</span>`
                    );
                });
                
                // 이야기 카드 내용 구성
                storyCard.innerHTML = `
                    <div class="story-header">
                        <div class="story-title">${title}</div>
                        <div class="story-idioms">
                            ${idioms.map(idiom => `<div class="story-idiom">${idiom}</div>`).join('')}
                        </div>
                    </div>
                    <div class="story-content">${highlightedContent}</div>
                `;
                
                // 이야기 목록에 추가
                myStoriesList.appendChild(storyCard);
                
                // 입력 필드 초기화
                resetForm();
            }
            
            // 폼 초기화 함수
            function resetForm() {
                storyTitleInput.value = '';
                storyContentInput.value = '';
                selectedIdioms = [];
                selectedIdiomsList.innerHTML = '';
                
                // 카드 선택 해제
                idiomCards.forEach(card => {
                    card.classList.remove('selected');
                });
            }
            
            // 리셋 버튼 이벤트
            resetButton.addEventListener('click', resetForm);
        });
    </script>
    <script src="../js/common.js"></script>
</body>
</html> 